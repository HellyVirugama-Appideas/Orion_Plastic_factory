<script>
  // Mobile menu toggle
  function toggleSidebar() {
    document.querySelector('.sidebar').classList.toggle('active');
    document.querySelector('.overlay')?.classList.toggle('active');
  }
  
  // Close sidebar when clicking overlay
  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('overlay')) {
      toggleSidebar();
    }
  });
  
  // Auto-hide alerts after 5 seconds
  document.querySelectorAll('.alert').forEach(alert => {
    setTimeout(() => {
      alert.style.opacity = '0';
      setTimeout(() => alert.remove(), 300);
    }, 5000);
  });
  
  // Confirm dialogs for dangerous actions
  document.querySelectorAll('[data-confirm]').forEach(element => {
    element.addEventListener('click', (e) => {
      if (!confirm(element.dataset.confirm)) {
        e.preventDefault();
      }
    });
  });
  
  // Auto-submit filters on change
  document.querySelectorAll('.auto-submit').forEach(element => {
    element.addEventListener('change', () => {
      element.closest('form').submit();
    });
  });
  
  // Format currency
  function formatCurrency(amount) {
    return new Intl.NumberFormat('en-IN', {
      style: 'currency',
      currency: 'INR',
      minimumFractionDigits: 0
    }).format(amount);
  }
  
  // Format date
  function formatDate(date) {
    return new Date(date).toLocaleDateString('en-IN', {
      year: 'numeric',
      month: 'short',
      day: 'numeric'
    });
  }
  
  // Format time
  function formatTime(date) {
    return new Date(date).toLocaleTimeString('en-IN', {
      hour: '2-digit',
      minute: '2-digit'
    });
  }
  
  // Copy to clipboard
  function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => {
      showToast('Copied to clipboard!');
    });
  }
  
  // Show toast notification
  function showToast(message, type = 'success') {
    const toast = document.createElement('div');
    toast.className = toast toast-\${type}\`;
    toast.innerHTML = \`
      <i class="fas fa-\${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
      <span>\${message}</span>
    \`;
    
    document.body.appendChild(toast);
    
    setTimeout(() => {
      toast.classList.add('show');
    }, 100);
    
    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => toast.remove(), 300);
    }, 3000);
  }
  
  // Table row click handler
  document.querySelectorAll('tr[data-href]').forEach(row => {
    row.style.cursor = 'pointer';
    row.addEventListener('click', () => {
      window.location = row.dataset.href;
    });
  });
  
  // Prevent form double submission
  document.querySelectorAll('form').forEach(form => {
    form.addEventListener('submit', function(e) {
      const submitBtn = form.querySelector('[type="submit"]');
      if (submitBtn && !submitBtn.disabled) {
        submitBtn.disabled = true;
        setTimeout(() => {
          submitBtn.disabled = false;
        }, 3000);
      }
    });
  });
  
  // Search with debounce
  function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }
  
  // Initialize tooltips (if using a tooltip library)
  document.querySelectorAll('[data-tooltip]').forEach(element => {
    element.title = element.dataset.tooltip;
  });
</script>

<style>
  .toast {
    position: fixed;
    bottom: 24px;
    right: 24px;
    background: white;
    padding: 16px 20px;
    border-radius: 10px;
    box-shadow: var(--shadow-xl);
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
    font-weight: 500;
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.3s;
    z-index: 10000;
    min-width: 200px;
  }
  
  .toast.show {
    transform: translateY(0);
    opacity: 1;
  }
  
  .toast-success {
    border-left: 4px solid var(--success-color);
    color: var(--success-color);
  }
  
  .toast-error {
    border-left: 4px solid var(--danger-color);
    color: var(--danger-color);
  }
  
  .overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
  }
  
  .overlay.active {
    display: block;
  }
  
  @media (max-width: 1024px) {
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      transform: translateX(-100%);
      transition: transform 0.3s;
      z-index: 1000;
    }
    
    .sidebar.active {
      transform: translateX(0);
    }
  }
</style>
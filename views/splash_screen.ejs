<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <%- include('_layouts/head') %>
        <title>Onboarding Screens | <%= title %>
        </title>

        <style>
            .ls img,
            .ls video {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            .card-image {
                height: 280px;
                /* Fixed height for uniformity */
                overflow: hidden;
            }
        </style>
</head>
<!-- END: Head-->

<body
    class="vertical-layout page-header-light vertical-menu-collapsible vertical-dark-menu preload-transitions 2-columns"
    data-open="click" data-menu="vertical-dark-menu" data-col="2-columns">

    <%- include('_layouts/sidenavbar') %>

        <!-- BEGIN: Page Main-->
        <div id="main">
            <div class="row">
                <div class="pt-1 pb-0" id="breadcrumbs-wrapper">
                    <div class="container">
                        <div class="row">
                            <%- include('messages', { messages: messages }) %>
                                <div class="col s12 m6 l6">
                                    <h6 class="breadcrumbs-title"><span>Manage Onboarding Screens</span></h6>
                                </div>
                                <div class="col s12 m6 l6 right-align-md" style="margin-top: -10px;">
                                    <ol class="breadcrumbs mb-0">
                                        <li class="breadcrumb-item"><a href="/admin">Dashboard</a></li>
                                        <li class="breadcrumb-item active">Onboarding Screens</li>
                                    </ol>
                                </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container mt-2">
                <div class="row">
                    <div class="col s5 m6 l6">
                        <p><b>Total Screens (<%= screens.length %>)</b></p>
                    </div>
                    <div class="col s7 m6 l6 right-align-md" style="text-align: right;">
                        <a href="/admin/onboarding/add" class="btn pull-right btn-add btn-breadcrumbs white-text">Add
                            New Screen</a>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="row ls">
                    <% for( let i=0; i < screens.length; i++ ) { %>
                        <div style="padding: 10px;" class="col s12 m6 l6 xl3">
                            <div id="profile-card" class="card" style="padding: 0%;">
                                <div class="card-image waves-effect waves-block waves-light">
                                    <% if (screens[i].mediaUrl) { %>
                                        <% if (screens[i].mediaType==='video' ) { %>
                                            <video class="activator" controls>
                                                <source src="<%= process.env.IMAGE_URL %><%= screens[i].mediaUrl %>"
                                                    type="video/mp4">
                                                Your browser does not support the video tag.
                                            </video>
                                            <% } else { %>
                                                <img class="activator"
                                                    src="<%= process.env.IMAGE_URL %><%= screens[i].mediaUrl %>" />
                                                <% } %>
                                                    <% } else { %>
                                                        <div class="valign-wrapper center-align"
                                                            style="height: 100%; background: #f5f5f5;">
                                                            <span>No Media</span>
                                                        </div>
                                                        <% } %>
                                </div>
                                <div class="card-content" style="padding-left: 0px !important;">
                                    <span class="card-title">
                                        <%= screens[i].type.toUpperCase() %> Screen
                                    </span>
                                    <p><small>Order: <%= screens[i].order %></small></p>
                                    <p><small>Button: <%= screens[i].buttonText || 'Next' %></small></p>

                                    <form action="/admin/onboarding/<%= screens[i]._id %>/delete" method="POST"
                                        style="display:inline;">
                                        <button type="submit"
                                            class="btn-floating activator btn-move-up waves-effect waves-light accent-2 z-depth-4 right btn-delete"
                                            onclick="return confirm('Are you sure you want to delete this screen?');">
                                            <i class="material-icons">delete</i>
                                        </button>
                                    </form>

                                    <a href="/admin/onboarding/edit/<%= screens[i]._id %>"
                                        class="btn-floating activator btn-move-up waves-effect waves-light accent-2 z-depth-4 right btn-edit">
                                        <i class="material-icons">edit</i>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <% } %>
                </div>
            </div>
        </div>
        <!-- END: Page Main-->

        <%- include('_layouts/commonJs') %>

</body>

</html>